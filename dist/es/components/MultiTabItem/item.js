import{createForOfIteratorHelper as e}from"../../_virtual/_rollupPluginBabelHelpers.js";import{SlotsMixin as t}from"../../utils/mixins.js";import{ChildrenMixin as i}from"../../utils/relation.js";import n from"../../utils/emitter.js";var r={name:"multi-tab-item",provide:function(){return{multiTabItem:this}},inject:["multiTab"],mixins:[t,n,i("multiTab")],props:{title:{type:String,default:""},itemStyle:{type:Object,default:function(){return{"min-height":"1px",height:"auto"}}}},data:function(){return{mounted:!1}},computed:{shouldRender:function(){var e=this.index,t=this.inited,i=this.parent,n=this.mounted;if(!i.lazyRender||t)return!0;if(!n)return!1;var r=e===i.currentPageIndex;return r&&(this.inited=!0),r}},watch:{},methods:{createDomObserver:function(){var t=this;this.resizeObserver=new ResizeObserver((function(i){var n,r=e(i);try{for(r.s();!(n=r.n()).done;){var s=n.value;console.log(s,"entry",t.index),s.contentBoxSize&&t.multiTab.updateHeight()}}catch(e){r.e(e)}finally{r.f()}console.log("Size changed")})),this.resizeObserver.observe(this.$refs.slidePageContent)},finishPullUp:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log("finishPullUp",this.index,e),this.dispatch("multi-tab","pullingUp",{index:this.index,isPullingUp:e})},closePullUp:function(){this.finishPullUp(!0)},openPullUp:function(){this.finishPullUp(!1)}},mounted:function(){var e=this;this.$nextTick((function(){console.log("mounted multiTabItem"),e.mounted=!0,e.createDomObserver()}))},created:function(){var e=this;this.$on("pullingUp-".concat(this.index),(function(){return e.$emit("pullingUp",{index:e.index})}))},beforeDestroy:function(){this.$off("pullingUp-".concat(this.index)),this.resizeObserver.unobserve(this.$refs.slidePageContent),this.resizeObserver=null},render:function(){var e=arguments[0];return e("div",{ref:"slidePage",class:"slide-page"},[e("div",{ref:"slidePageContent",style:this.itemStyle},["当前页面索引值---",this.index,this.shouldRender&&this.slots()])])}};export{r as default};
